<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,user-scalable=no,minimal-ui">
    <!--  响应式布局     -->
    <meta name="description" content="人事平台">
    <meta name="author" content="人事平台">
    <link rel="stylesheet" href="plugins/elementui/index.css">
    <link rel="stylesheet" href="css/register.css">
    <!-- 引入组件库 -->
    <script src="js/axios-0.18.0.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/vue.js"></script>
    <script src="plugins/elementui/index.js"></script>
</head>
    <body>
    <div id="app">
        <el-container>
            <el-header>
                <el-menu background-color="#545c60" :default-active="activeIndex" class="el-menu-demo" mode="horizontal" >
                    <el-menu-item index="4"><i style="color: white" class="el-icon-back">
                    </i></el-menu-item>
                </el-menu>
            </el-header>
            <el-main>
                <div class="loginBox">
                    <form method="post" class="login-form" label-position="left">
                                <div class="title">登录</div>
                                <el-form class="loginDistance" ref="form" :model="form" label-width="160px" >
                                    <el-form-item label="用户名:">
                                        <el-input v-model="form.username" placeholder="请输入用户名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="密码:">
                                        <el-input v-model="form.password" placeholder="请输入密码"></el-input>
                                    </el-form-item>
                                </el-form>
                                <div class="button">
                                    <el-row class="buttonType">
                                        <el-button @click="dengLu" class="but" type="danger">登录</el-button>
                                    </el-row>
                                    <el-row class="buttonType">
                                        <el-button @click="register" class="but" type="warning">注册</el-button>
                                    </el-row>
                                </div>
                            </form>
                        </div>
                </el-main>
        </el-container>
    </div>
    </body>
    <script type="text/javascript">
        new Vue({
            el : "#app" ,
            data : {
                form : {
                    username : "" ,
                    password : ""
                }
            } ,
            created : function() {
                that = this ;
            } ,
            methods : {
                dengLu : function () {
                    axios.post( "/login/user" , that.form ).then(function (value) {
                        data = value.data ;
                        if ( data.bool ) {
                            that.$message({
                                showClose: true ,
                                message: "登录成功" ,
                                type: 'success'
                            });
                            location.href = "/main.html" ;
                        } else {
                            that.$message({
                                showClose: true ,
                                message: "密码或账号错误" ,
                                type: 'error'
                            });
                        }
                    })
                } ,
                register : function () {

                }
            }
        })
    </script>
</html>